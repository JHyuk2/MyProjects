# 7. Information Gain

질문에 따른 information gain을 얻기 위해, 모든 keyword에 질문을 해보고, yes or no로 잘 나뉘는지를 확인하였다.

첫 질문은 `is it a place?` 로, keywords_df[’category’] 를 통해 잘 분리되었는지 확인할 수 있다.

![Untitled](/../assets/question_category.png)

![Untitled](/../assets/CPU.png)

- 효율적이지 못한 간단한 코드.

  로딩을 무한으로 즐길 수 있다.

- keyword 한 개당 1~2초의 답변 시간이 걸린다.

- 한계를 돌파한 CPU는 덤 (최대 130% 돌파)

------

**보완해야 할 점**

- 이대로면 질문을 미리 선별해서 rule base로 사용하는 것은 가능해도, 즉각적으로 좋은 질문을 고르기는 어렵다.
  - asker에 입력할 때, series 자체를 입력으로 넘겨준다면 빨라질까?
  - bos가 열린 상태에서 eos 없이 user와 assistant 대화를 주고받을 수 있다면 시간을 줄일 수 있지 않을까?

------



## 다소 충격적인 answer 결과

(`llama3-8b-chat-hf 모델`)

생각보다,,, 시작부터 잘못된 질문을 하고 있을 수도 있다.

**LLM성능이 생각보다 좋지 않아, 오답을 내는 문제가 발생하고 있었다.**

1. `category == ‘things’ & is it a place == ‘yes’`

![Untitled](/../assets/question_1.png)

2. `category == ‘place’ & is it a place == ‘no’`

![Untitled](/../assets/question_K2.png)

- k2 - 소총, 전차…
  - 근데 k2가 뭘까?
  - 에베레스트 다음가는 세계 제 2의 고봉, 파키스탄~중국에 위치한 산

![Untitled](/../assets/K2.png)

- cho oyu - 아시아의 봉우리 (오분류)

- sumantri - 인도네시아의 산 (오분류)

- 아쿠아리움, 피라미드, 은행 등은 확실히 ‘장소’이다.

- Name tag, Pad, Bat, Plate 등등 - 오분류

  ![Untitled](/../assets/miss_match.png)

- Water가 장소인가…?

---

### 가설1) obs.category를 이용해야 한다.

```python
Class Observation:
	def __init__(self):
		self.step = 0
		self.role = 'answerer'
		self.turnType = 'answer'
		self.keyword = 'power cable'
		self.category = 'things'
		self.questions = ['is it a place?']
		self.answers = []
		self.guesses = []
		
obs = Observation()
```

obs 정보 안에 category가 있기 때문에, 첫 질문으로 category를 묻는 것이 조금 더 정확한 방법이 될 것 같다.

예시 : `"is the keyword’s category a things?"`

- 프롬프트 안에 obs.category까지 같이 넘겨주지 않는 경우가 대부분일 것 같은데 유의미할까?



### 가설2) GPS (경도와 위도)를 갖고 있는지 물어본다. ⇒ 폐기

장소라고 말하는 것은 어쩌면 추상적인 질문이 될 수 있다.

- Q) `“does it have longitude and latitude?”`

```python
keywords_df[(keywords_df['category']=='things') & (keywords_df['does it have longitude and latitude?']=='yes')]
```

![hypo](/../assets/hypo_2.png)

- things에 대한 오분류는 엄청나게 늘어났으나 (기존 41 → 142)
- 키워드 10번-애플파이, 577번-요거트는 맛집 좌표를 찍어준걸까?

![Untitled](/../assets/hypo_2_miss.png)

- 그럼에도 category==’place’에 대해서는 정확히 맞추는 성능을 보여주었다.

> 근데 이정도 성능이면 그냥 `is it a place?` 가 더 나은 것 같다…

- 앙상블을 사용하는 방법도 있겠지만,,,모델 자체 성능이 너무 떨어져서 걱정되는 부분이다.



### 가설3) 영문 형태소 분석기(nltk)를 사용하는 건 어떨까?

- 한국어 RAG 구성에서는 Retriever를 형태소 분석기와 함께 사용했을 때 검색 성능이 올라간다고 한다.
- 캐글에서도 시도해볼 만 한 것 같다.

  - 고유명사인지 아닌지 확인하기.
  - 지역의 경우, 대부분은 고유명사일 것으로 예측한다.

---

> NLTK 라이브러리가 자체적으로 보유하고 있는 명사, 고유명사를 불러와서 사용
